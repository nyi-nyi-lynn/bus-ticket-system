<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.shape.SVGPath?>

<ScrollPane xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.busticket.controller.passenger.PassengerDashboardController"
            fitToWidth="true" styleClass="dashboard-scroll" stylesheets="@../theme.css">
    <content>
        <StackPane>
            <VBox spacing="18" styleClass="content-area">
                <Label fx:id="welcomeLabel" text="Welcome, -" styleClass="page-title"/>

                <VBox fx:id="quickActionsSection" spacing="12">
                    <Label text="Quick Actions" styleClass="section-title"/>
                    <FlowPane fx:id="quickActionsWrap" hgap="20" vgap="20">
                        <VBox fx:id="searchTripsCard" styleClass="quick-action-card" onMouseClicked="#onSearchTrips">
                            <SVGPath styleClass="quick-action-icon"
                                     content="M15.5 14h-.8l-.3-.3A6.5 6.5 0 1 0 14 15.5l.3.3v.8L20 22l2-2-6.5-6zm-6 0A4.5 4.5 0 1 1 10 5a4.5 4.5 0 0 1-.5 9z"/>
                            <Label text="Search Trips" styleClass="quick-action-title"/>
                            <Label text="Find and book new trips" styleClass="quick-action-subtitle"/>
                        </VBox>

                        <VBox fx:id="myBookingsCard" styleClass="quick-action-card" onMouseClicked="#onMyBookings">
                            <SVGPath styleClass="quick-action-icon"
                                     content="M3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v3a2 2 0 0 0 0 4v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-3a2 2 0 0 0 0-4V7zm4 1v8h2V8H7zm8 0v8h2V8h-2z"/>
                            <Label text="My Bookings" styleClass="quick-action-title"/>
                            <Label text="Manage your reservations" styleClass="quick-action-subtitle"/>
                        </VBox>

                        <VBox fx:id="profileCard" styleClass="quick-action-card" onMouseClicked="#onProfile">
                            <SVGPath styleClass="quick-action-icon"
                                     content="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm0 2c-4.4 0-8 2.2-8 5v2h16v-2c0-2.8-3.6-5-8-5z"/>
                            <Label text="Profile" styleClass="quick-action-title"/>
                            <Label text="View and update your info" styleClass="quick-action-subtitle"/>
                        </VBox>
                    </FlowPane>
                </VBox>

                <VBox spacing="12" styleClass="card">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Upcoming Trip" styleClass="section-title"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button fx:id="viewTicketButton" text="View Ticket" onAction="#onViewTicket" styleClass="primary-button"/>
                    </HBox>
                    <VBox spacing="8">
                        <HBox spacing="10">
                            <Label text="Route:" styleClass="meta-label"/>
                            <Label fx:id="upcomingRouteLabel" text="-" styleClass="meta-value"/>
                        </HBox>
                        <HBox spacing="10">
                            <Label text="Departure:" styleClass="meta-label"/>
                            <Label fx:id="upcomingDepartureLabel" text="-" styleClass="meta-value"/>
                        </HBox>
                        <HBox spacing="10">
                            <Label text="Bus:" styleClass="meta-label"/>
                            <Label fx:id="upcomingBusLabel" text="-" styleClass="meta-value"/>
                        </HBox>
                        <HBox spacing="10">
                            <Label text="Seats:" styleClass="meta-label"/>
                            <Label fx:id="upcomingSeatsLabel" text="-" styleClass="meta-value"/>
                        </HBox>
                        <HBox spacing="10">
                            <Label text="Booking Code:" styleClass="meta-label"/>
                            <Label fx:id="upcomingCodeLabel" text="-" styleClass="meta-value"/>
                        </HBox>
                    </VBox>
                </VBox>

                <VBox spacing="12">
                    <Label text="Booking Summary" styleClass="section-title"/>
                    <HBox spacing="16">
                        <VBox styleClass="kpi-card" spacing="6">
                            <Label text="Total Bookings" styleClass="kpi-title"/>
                            <Label fx:id="totalBookingsValue" text="-" styleClass="kpi-value"/>
                        </VBox>
                        <VBox styleClass="kpi-card" spacing="6">
                            <Label text="Upcoming Trips" styleClass="kpi-title"/>
                            <Label fx:id="upcomingTripsValue" text="-" styleClass="kpi-value"/>
                        </VBox>
                        <VBox styleClass="kpi-card" spacing="6">
                            <Label text="Completed Trips" styleClass="kpi-title"/>
                            <Label fx:id="completedTripsValue" text="-" styleClass="kpi-value"/>
                        </VBox>
                        <VBox styleClass="kpi-card" spacing="6">
                            <Label text="Cancelled Bookings" styleClass="kpi-title"/>
                            <Label fx:id="cancelledBookingsValue" text="-" styleClass="kpi-value"/>
                        </VBox>
                    </HBox>
                </VBox>

                <VBox spacing="12">
                    <Label text="Recent Bookings" styleClass="section-title"/>
                    <TableView fx:id="recentBookingsTable" styleClass="dashboard-table">
                        <columns>
                            <TableColumn fx:id="bookingCodeColumn" text="Booking Code"/>
                            <TableColumn fx:id="routeColumn" text="Route"/>
                            <TableColumn fx:id="departureColumn" text="Departure Date"/>
                            <TableColumn fx:id="seatsColumn" text="Seats"/>
                            <TableColumn fx:id="totalPriceColumn" text="Total Price"/>
                            <TableColumn fx:id="statusColumn" text="Status"/>
                            <TableColumn fx:id="actionColumn" text="Action"/>
                        </columns>
                    </TableView>
                </VBox>

                <VBox spacing="12">
                    <Label text="Notifications" styleClass="section-title"/>
                    <VBox fx:id="notificationsBox" spacing="8"/>
                </VBox>
            </VBox>

            <StackPane fx:id="loadingOverlay" styleClass="loading-overlay" visible="false" managed="false">
                <VBox spacing="10" alignment="CENTER">
                    <ProgressIndicator />
                    <Label text="Loading dashboard..." styleClass="page-subtitle"/>
                </VBox>
            </StackPane>
        </StackPane>
    </content>
</ScrollPane>
