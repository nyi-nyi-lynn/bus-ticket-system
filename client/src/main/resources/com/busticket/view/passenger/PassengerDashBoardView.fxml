<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<ScrollPane xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.busticket.controller.passenger.PassengerDashboardController"
            fitToWidth="true" styleClass="dashboard-scroll" stylesheets="@../theme.css">
    <content>
        <StackPane>
            <VBox spacing="18" styleClass="content-area">
                <Label fx:id="welcomeLabel" text="Welcome, -" styleClass="page-title"/>

                <VBox spacing="12">
                    <Label text="Quick Actions" styleClass="section-title"/>
                    <HBox spacing="16">
                        <VBox styleClass="action-card" spacing="10">
                            <Label text="Search Trips" styleClass="action-title"/>
                            <Button fx:id="searchTripsButton" text="Search" onAction="#onSearchTrips" styleClass="primary-button"/>
                        </VBox>
                        <VBox styleClass="action-card" spacing="10">
                            <Label text="My Bookings" styleClass="action-title"/>
                            <Button fx:id="myBookingsButton" text="Open" onAction="#onMyBookings" styleClass="primary-button"/>
                        </VBox>
                        <VBox styleClass="action-card" spacing="10">
                            <Label text="Profile" styleClass="action-title"/>
                            <Button fx:id="profileButton" text="Open" onAction="#onProfile" styleClass="primary-button"/>
                        </VBox>
                        <VBox styleClass="action-card" spacing="10">
                            <Label text="Support" styleClass="action-title"/>
                            <Button fx:id="supportButton" text="Contact" onAction="#onSupport" styleClass="ghost-button"/>
                        </VBox>
                    </HBox>
                </VBox>

                <VBox spacing="12" styleClass="card">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Upcoming Trip" styleClass="section-title"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button fx:id="viewTicketButton" text="View Ticket" onAction="#onViewTicket" styleClass="primary-button"/>
                    </HBox>
                    <VBox spacing="8">
                        <HBox spacing="10">
                            <Label text="Route:" styleClass="meta-label"/>
                            <Label fx:id="upcomingRouteLabel" text="-" styleClass="meta-value"/>
                        </HBox>
                        <HBox spacing="10">
                            <Label text="Departure:" styleClass="meta-label"/>
                            <Label fx:id="upcomingDepartureLabel" text="-" styleClass="meta-value"/>
                        </HBox>
                        <HBox spacing="10">
                            <Label text="Bus:" styleClass="meta-label"/>
                            <Label fx:id="upcomingBusLabel" text="-" styleClass="meta-value"/>
                        </HBox>
                        <HBox spacing="10">
                            <Label text="Seats:" styleClass="meta-label"/>
                            <Label fx:id="upcomingSeatsLabel" text="-" styleClass="meta-value"/>
                        </HBox>
                        <HBox spacing="10">
                            <Label text="Booking Code:" styleClass="meta-label"/>
                            <Label fx:id="upcomingCodeLabel" text="-" styleClass="meta-value"/>
                        </HBox>
                    </VBox>
                </VBox>

                <VBox spacing="12">
                    <Label text="Booking Summary" styleClass="section-title"/>
                    <HBox spacing="16">
                        <VBox styleClass="kpi-card" spacing="6">
                            <Label text="Total Bookings" styleClass="kpi-title"/>
                            <Label fx:id="totalBookingsValue" text="-" styleClass="kpi-value"/>
                        </VBox>
                        <VBox styleClass="kpi-card" spacing="6">
                            <Label text="Upcoming Trips" styleClass="kpi-title"/>
                            <Label fx:id="upcomingTripsValue" text="-" styleClass="kpi-value"/>
                        </VBox>
                        <VBox styleClass="kpi-card" spacing="6">
                            <Label text="Completed Trips" styleClass="kpi-title"/>
                            <Label fx:id="completedTripsValue" text="-" styleClass="kpi-value"/>
                        </VBox>
                        <VBox styleClass="kpi-card" spacing="6">
                            <Label text="Cancelled Bookings" styleClass="kpi-title"/>
                            <Label fx:id="cancelledBookingsValue" text="-" styleClass="kpi-value"/>
                        </VBox>
                    </HBox>
                </VBox>

                <VBox spacing="12">
                    <Label text="Recent Bookings" styleClass="section-title"/>
                    <TableView fx:id="recentBookingsTable" styleClass="dashboard-table">
                        <columns>
                            <TableColumn fx:id="bookingCodeColumn" text="Booking Code"/>
                            <TableColumn fx:id="routeColumn" text="Route"/>
                            <TableColumn fx:id="departureColumn" text="Departure Date"/>
                            <TableColumn fx:id="seatsColumn" text="Seats"/>
                            <TableColumn fx:id="totalPriceColumn" text="Total Price"/>
                            <TableColumn fx:id="statusColumn" text="Status"/>
                            <TableColumn fx:id="actionColumn" text="Action"/>
                        </columns>
                    </TableView>
                </VBox>

                <VBox spacing="12">
                    <Label text="Notifications" styleClass="section-title"/>
                    <VBox fx:id="notificationsBox" spacing="8"/>
                </VBox>
            </VBox>

            <StackPane fx:id="loadingOverlay" styleClass="loading-overlay" visible="false" managed="false">
                <VBox spacing="10" alignment="CENTER">
                    <ProgressIndicator />
                    <Label text="Loading dashboard..." styleClass="page-subtitle"/>
                </VBox>
            </StackPane>
        </StackPane>
    </content>
</ScrollPane>
