<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>


<StackPane stylesheets="@../theme.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.busticket.controller.admin.ReportsController">
    <ScrollPane fitToWidth="true" hbarPolicy="NEVER" styleClass="dashboard-scroll" vbarPolicy="AS_NEEDED">
        <content>
            <VBox maxWidth="1.7976931348623157E308" spacing="16">
                <padding>
                    <Insets bottom="16" left="16" right="16" top="16" />
                </padding>

                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label styleClass="page-title" text="Reports" />
                    <Region HBox.hgrow="ALWAYS" />
                    <ComboBox fx:id="reportTypeFilter" prefWidth="220" />
                </HBox>

                <VBox spacing="12" styleClass="card">
                    <GridPane hgap="10" vgap="10">
                        <DatePicker fx:id="fromDatePicker" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <DatePicker fx:id="toDatePicker" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                        <ComboBox fx:id="routeFilter" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                        <ComboBox fx:id="busFilter" GridPane.columnIndex="3" GridPane.rowIndex="0" />
                        <ComboBox fx:id="tripFilter" GridPane.columnIndex="4" GridPane.rowIndex="0" />

                        <ComboBox fx:id="bookingStatusFilter" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <ComboBox fx:id="paymentStatusFilter" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                        <HBox alignment="CENTER_RIGHT" spacing="10" GridPane.columnIndex="3" GridPane.columnSpan="2" GridPane.rowIndex="1">
                            <Button fx:id="generateButton" onAction="#onGenerate" styleClass="primary-button" text="Generate" />
                            <Button fx:id="exportCsvButton" onAction="#onExportCsv" styleClass="ghost-button" text="Export CSV" />
                            <Button fx:id="exportPdfButton" onAction="#onExportPdf" styleClass="ghost-button" text="Export PDF" />
                        </HBox>
                        <columnConstraints>
                            <ColumnConstraints />
                            <ColumnConstraints />
                            <ColumnConstraints />
                            <ColumnConstraints />
                            <ColumnConstraints />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints />
                            <RowConstraints />
                        </rowConstraints>
                    </GridPane>
                </VBox>

                <HBox spacing="12">
                    <VBox spacing="6" styleClass="kpi-card" HBox.hgrow="ALWAYS">
                        <Label fx:id="kpiTitle1" styleClass="kpi-title" text="-" />
                        <Label fx:id="kpiValue1" styleClass="kpi-value" text="-" />
                        <Label fx:id="kpiSubtitle1" styleClass="kpi-subtitle" text="-" />
                    </VBox>
                    <VBox spacing="6" styleClass="kpi-card" HBox.hgrow="ALWAYS">
                        <Label fx:id="kpiTitle2" styleClass="kpi-title" text="-" />
                        <Label fx:id="kpiValue2" styleClass="kpi-value" text="-" />
                        <Label fx:id="kpiSubtitle2" styleClass="kpi-subtitle" text="-" />
                    </VBox>
                    <VBox spacing="6" styleClass="kpi-card" HBox.hgrow="ALWAYS">
                        <Label fx:id="kpiTitle3" styleClass="kpi-title" text="-" />
                        <Label fx:id="kpiValue3" styleClass="kpi-value" text="-" />
                        <Label fx:id="kpiSubtitle3" styleClass="kpi-subtitle" text="-" />
                    </VBox>
                </HBox>

                <VBox spacing="12" styleClass="card">
                    <Label styleClass="section-title" text="Performance" />
                    <BarChart fx:id="reportChart" prefHeight="280">
                        <xAxis>
                            <CategoryAxis fx:id="chartXAxis" />
                        </xAxis>
                        <yAxis>
                            <NumberAxis fx:id="chartYAxis" />
                        </yAxis>
                    </BarChart>
                </VBox>

                <VBox spacing="10" styleClass="card" VBox.vgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label styleClass="section-title" text="Details" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="toggleDetailsButton" onAction="#onToggleDetails" styleClass="ghost-button" text="Expand" />
                        <Label fx:id="generatedAtLabel" styleClass="page-subtitle" text="-" />
                    </HBox>
                    <ScrollPane fitToHeight="true" fitToWidth="true" styleClass="report-table-scroll" VBox.vgrow="ALWAYS">
                        <content>
                            <TableView fx:id="reportsTable" />
                        </content>
                    </ScrollPane>
                </VBox>
            </VBox>
        </content>
    </ScrollPane>
</StackPane>
