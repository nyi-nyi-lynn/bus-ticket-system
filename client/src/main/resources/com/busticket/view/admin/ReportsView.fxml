<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<VBox xmlns:fx="http://javafx.com/fxml"
      xmlns="http://javafx.com/javafx/25"
      fx:controller="com.busticket.controller.admin.ReportsController"
      spacing="16"
      maxWidth="1.7976931348623157E308"
      stylesheets="@../theme.css">
    <padding>
        <Insets top="16" right="16" bottom="16" left="16" />
    </padding>

    <HBox spacing="12" alignment="CENTER_LEFT">
        <Label text="Reports" styleClass="page-title" />
        <Region HBox.hgrow="ALWAYS" />
        <ComboBox fx:id="reportTypeFilter" prefWidth="220" />
    </HBox>

    <VBox styleClass="card" spacing="12">
        <GridPane hgap="10" vgap="10">
            <DatePicker fx:id="fromDatePicker" GridPane.columnIndex="0" GridPane.rowIndex="0" />
            <DatePicker fx:id="toDatePicker" GridPane.columnIndex="1" GridPane.rowIndex="0" />
            <ComboBox fx:id="routeFilter" GridPane.columnIndex="2" GridPane.rowIndex="0" />
            <ComboBox fx:id="busFilter" GridPane.columnIndex="3" GridPane.rowIndex="0" />
            <ComboBox fx:id="tripFilter" GridPane.columnIndex="4" GridPane.rowIndex="0" />

            <ComboBox fx:id="bookingStatusFilter" GridPane.columnIndex="0" GridPane.rowIndex="1" />
            <ComboBox fx:id="paymentStatusFilter" GridPane.columnIndex="1" GridPane.rowIndex="1" />
            <HBox spacing="10" GridPane.columnIndex="3" GridPane.rowIndex="1" GridPane.columnSpan="2" alignment="CENTER_RIGHT">
                <Button fx:id="generateButton" text="Generate" onAction="#onGenerate" styleClass="primary-button" />
                <Button fx:id="exportCsvButton" text="Export CSV" onAction="#onExportCsv" styleClass="ghost-button" />
                <Button fx:id="exportPdfButton" text="Export PDF" onAction="#onExportPdf" styleClass="ghost-button" />
            </HBox>
        </GridPane>
    </VBox>

    <HBox spacing="12">
        <VBox styleClass="kpi-card" spacing="6" HBox.hgrow="ALWAYS">
            <Label fx:id="kpiTitle1" styleClass="kpi-title" text="-" />
            <Label fx:id="kpiValue1" styleClass="kpi-value" text="-" />
            <Label fx:id="kpiSubtitle1" styleClass="kpi-subtitle" text="-" />
        </VBox>
        <VBox styleClass="kpi-card" spacing="6" HBox.hgrow="ALWAYS">
            <Label fx:id="kpiTitle2" styleClass="kpi-title" text="-" />
            <Label fx:id="kpiValue2" styleClass="kpi-value" text="-" />
            <Label fx:id="kpiSubtitle2" styleClass="kpi-subtitle" text="-" />
        </VBox>
        <VBox styleClass="kpi-card" spacing="6" HBox.hgrow="ALWAYS">
            <Label fx:id="kpiTitle3" styleClass="kpi-title" text="-" />
            <Label fx:id="kpiValue3" styleClass="kpi-value" text="-" />
            <Label fx:id="kpiSubtitle3" styleClass="kpi-subtitle" text="-" />
        </VBox>
    </HBox>

    <VBox styleClass="card" spacing="12">
        <Label text="Performance" styleClass="section-title" />
        <BarChart fx:id="reportChart" prefHeight="280">
            <xAxis>
                <CategoryAxis fx:id="chartXAxis" />
            </xAxis>
            <yAxis>
                <NumberAxis fx:id="chartYAxis" />
            </yAxis>
        </BarChart>
    </VBox>

    <VBox styleClass="card" spacing="10" VBox.vgrow="ALWAYS">
        <HBox spacing="10" alignment="CENTER_LEFT">
            <Label text="Details" styleClass="section-title" />
            <Region HBox.hgrow="ALWAYS" />
            <Button fx:id="toggleDetailsButton" text="Expand" onAction="#onToggleDetails" styleClass="ghost-button" />
            <Label fx:id="generatedAtLabel" text="-" styleClass="page-subtitle" />
        </HBox>
        <ScrollPane fitToWidth="true" fitToHeight="true" styleClass="report-table-scroll" VBox.vgrow="ALWAYS">
            <content>
                <TableView fx:id="reportsTable" />
            </content>
        </ScrollPane>
    </VBox>
</VBox>
